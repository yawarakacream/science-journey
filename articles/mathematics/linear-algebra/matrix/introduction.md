---
title: "行列の導入と使い道"
description: "行列の定義や定理を，大学では説明してくれない具体的な行列の使い道から詳しく説明します．行列の使い道の一例として「アフィン変換」というものがあります．アフィン変換を使うと高校で習った複素数平面よりも高度に点の回転や平行移動をすることができます．"
---

「行列」というものを考えます．

高校で数を一方向に並べた「ベクトル」というものを学びました．  
行列はさらに数を縦横の $2$ 方向に並べたものです．

$$
\begin{pmatrix}
    1 & 2 \\
    3 & 4
\end{pmatrix}
,\
\begin{pmatrix}
    a & b^{2}        & -s \\
    2x & \sin \theta & p
\end{pmatrix}
,\
...
$$

多くの大学では入学してすぐに線形代数の講義があり行列を学びますが，  
始めの頃はなんのためにやっているのか疑問に思いがちです．

何かの試合の点数表を行列で書ける，みたいなことを例として出されがちですが，  
特にそういう問題を解かされるわけでもないのでだから何だよって感じだと思います．

そこで，ここでは行列のアフィン変換というものを紹介します．

# アフィン変換

行列には「点を移す写像（関数）」としての一面があります．  

少し振り返ると，数学Ⅲの「複素数平面」で複素数を使って点を回転させる方法を学びました．  
複素数平面を使えば，縦向きに書いたベクトル

$$
\bm{a} = \begin{pmatrix} x \\ y \end{pmatrix}
$$

を $\theta$ 回転させると，

$$
\bm{a'} =
\begin{pmatrix}
    x \cos \theta - y \sin \theta \\
    x \sin \theta + y \cos \theta
\end{pmatrix}
$$

になることが簡単にわかります．

しかし，複素数平面にはいくつか欠点があります．

- 回転が積 & 平行移動が和で最適化しづらい
- $3$ 次元以上のベクトルには太刀打ちできない
- $x$ 成分だけを $k$ 倍する，のような操作も難しい

その点，行列はその成分をうまく合わせることで，点を移す操作をだいたいなんでも積の形で表すことができます．  
結果のみを述べるので，行列の積を知らなくてもそうなるんだ程度に見てもらえれば大丈夫です．

早速ですが回転は $\bm{a'}$ の形をうまく作ればいいので

$$
    \begin{pmatrix}
        \cos \theta & - \sin \theta \\
        \sin \theta & \cos \theta
    \end{pmatrix}
    \begin{pmatrix}
        x \\
        y
    \end{pmatrix}
    =
    \begin{pmatrix}
        x \cos \theta - y \sin \theta \\
        x \sin \theta + y \cos \theta
    \end{pmatrix}
    = \bm{a'}
$$

ということで
$$
    \begin{pmatrix}
        \cos \theta & - \sin \theta \\
        \sin \theta & \cos \theta
    \end{pmatrix}
$$
を左から掛ければ辻褄が合って回転させられることがわかります（回転行列）．

続けて平行移動と，ついでに定数倍もしてしまいましょう．  
複素数平面と同様の感覚で，平行移動を積で表現するのはこのままだと難しいです．  
そこで以下のようにもう $1$ 次元めを追加してしまいます．

$$
    \begin{pmatrix}
        a_{x} & 0     & b_{x} \\
        0     & a_{y} & b_{y} \\
        0     & 0     & 1
    \end{pmatrix}
    \begin{pmatrix}
        x \\
        y \\
        1
    \end{pmatrix}
    =
    \begin{pmatrix}
        a_{x} x + b_{x} \\
        a_{y} y + b_{y} \\
        1
    \end{pmatrix}
$$

少しずるい気もしますが，行列はその拡張性の高さに優位性があるのです．  
これで平行移動と定数倍もできました．

このように $n$ 次元ベクトルを $n$ 次元ベクトルに変換するのに $n + 1$ 次元ベクトルを持ち出すことを **アフィン変換** （Affine Transformation）といいます．  
（アフィン変換では追加した $1$ 次元めは常に $1$ になるので，変換の計算の都合以外では無視してよい）

ちなみにアフィン変換の回転は $1,\ 2$ 行 $1,\ 2$ 列の部分をさっきの回転行列に置き換えればよいです．

行列は次元操作に長けており，他にも $3$ 次元の空間を $2$ 次元に投影するといった変換を記述できたりします（[参考：OpenCV](http://opencv.jp/opencv-2.1/cpp/camera_calibration_and_3d_reconstruction.html)）．

そういうわけで，行列は点を移す写像として有用なのです．

### 余談

**四元数** という，虚数単位を $3$ つに増やした複素数を拡張した概念があり，それを使えば一応は $3$ 次元の回転を考えることができます．

しかし，一般に虚数単位を増やすと演算規則が失われていくとされており，人間が扱うには難しいです．  
四元数では積が非可換，つまり $a \cdot b$ が $b \cdot a$ と等しいとは限らなくなります．これくらいならまだいいですが，四元数以降はしんどいです．  

もちろんメリットもあって，特に行列の積を取るのは計算が多くて大変な一方，四元数の積は計算自体は多くないことが挙げられます．  
コンピュータグラフィックスや航空のオートパイロットなど速度が求められる分野では四元数を採用することもあるようです．

特別な操作が必要ないときにはそれに合ったものを使いましょうということです（それはそう）．
